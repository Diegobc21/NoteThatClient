<li *ngIf="password"
    class="group animate-fade-in-down animate-duration-fast flex justify-between transition-colors duration-100 dark:hover:bg-slate-800 hover:bg-slate-100 px-4 py-1 rounded-md"
>
  <div>
    <h2 class="font-semibold">
      <div
        class="text-cyan-600 hover:underline dark:text-cyan-300 text-ellipsis overflow-hidden"
      >
        {{ password.title }}
      </div>
    </h2>
    <h2 class="text-sm text-ellipsis overflow-hidden">
      {{ password.username }}
    </h2>
    <h2 class="text-sm text-ellipsis overflow-hidden">
      {{ password.email }}
    </h2>
    @if (password.visible && password.password) {
      <app-copy-badge
        icon="key-round"
        [text]="(password.password)"
      ></app-copy-badge>
    } @else {
      <p>******</p>
    }
  </div>
  <div class="hidden group-hover:flex space-x-2 items-center">
    <app-show-password-button
      title="Show/hide password"
      (onClick)="toggleVisibilityOverlay()"
    ></app-show-password-button>
    <app-edit-button
      title="Edit password"
      (onClick)="toggleEdit()"
    ></app-edit-button>
    <app-delete-button
      title="Delete password"
      (onClick)="toggleDelete()"
    ></app-delete-button>
  </div>
</li>


<!--Editing password-->
<ng-template #editPasswordTemplate>
  <h2 class="text-xl mb-4">Editar contraseña</h2>
  <form (submit)="onEditPassword()">
    <app-input
      [model]="(passwordForm | async)!.title"
      (valueChange)="this.onPasswordChanged($event, 'title')"
      [required]="true"
      placeholder="Título (obligatorio)"
    ></app-input>

    <div class="flex items-center gap-1">
      <app-input
        class="w-full"
        [model]="(passwordForm | async)!.password"
        (valueChange)="this.onPasswordChanged($event, 'password')"
        [type]="password.visible ? 'text' : 'password'"
        [required]="true"
        placeholder="Contraseña"
      ></app-input>
      <app-show-password-button
        class="mb-2"
        title="Show/hide password"
        [visible]="password.visible ?? false"
        (onClick)="toggleVisibilityOverlay()"
      ></app-show-password-button>
    </div>
    <app-input
      placeholder="Usuario (opcional)"
      [model]="(passwordForm | async)!.username"
      (valueChange)="this.onPasswordChanged($event, 'username')"
    ></app-input>
    <app-input
      type="email"
      placeholder="Email (opcional)"
      [model]="(passwordForm | async)!.email"
      (valueChange)="this.onPasswordChanged($event, 'email')"
    ></app-input>
  </form>
</ng-template>


<!--Deleting password-->
<ng-template #deletePasswordTemplate>
  <h1 class="text-center font-bold">
    ¿Seguro que deseas eliminar esta contraseña?
  </h1>
  <form (submit)="onDeletePassword()">
    <div class="mx-auto mt-2 text-center text-xl w-fit font-bold text-red-400">
      {{ (passwordForm | async)!.title }}
    </div>
  </form>
</ng-template>

<!-- Activate visibility -->
<ng-template #activateVisibilityTemplate>
    <h1 class="mb-3 text-lg font-bold">Escribe tu contraseña:</h1>
    <form (ngSubmit)="checkAccountPassword()">
      <app-input
        [model]="userPassword"
        type="password"
        (valueChange)="userPassword = $event"
        placeholder="Contraseña de tu cuenta de NoteThat"
      ></app-input>
    </form>
</ng-template>
